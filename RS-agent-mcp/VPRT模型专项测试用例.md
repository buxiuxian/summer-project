# VPRT模型专项测试用例

## 测试说明
本文档专门针对VPRT（植被被动辐射传输模型）的测试用例，涵盖基础功能、参数变化、边界值、错误处理等各个方面。

**VPRT模型特点**：
- 场景类型：植被（Vegetation）
- 模型名称：VPRT 或 RT
- 支持模式：仅被动模式（passive/tb），不支持主动模式
- 关键参数：fGHz（单个值）、scatters（嵌套列表）、veg_height等

---

## 1. 基础功能测试

### 1.1 默认参数测试 ✅
```
请帮我进行植被场景的RSHub建模分析
```
**检查点**：
- [x] 是否正确识别为植被场景 ✅ 通过
- [x] 是否正确识别为VPRT/RT模型 ✅ 通过
- [x] fGHz是否为单个值（不是列表） ✅ 通过
- [x] 是否包含scatters参数 ✅ 通过
- [x] output_var是否为'tb' ✅ 通过
- [x] 是否不包含inc_ang参数 ✅ 通过

### 1.2 指定频率测试 ✅
```
请进行植被场景的RSHub建模，使用1.41 GHz频率
```
**检查点**：
- [x] fGHz是否正确设置为1.41（单个值） ✅ 通过
- [x] 其他参数是否使用默认值 ✅ 通过

### 1.3 低频测试 ✅
```
请进行植被场景的RSHub建模，频率设置为0.5 GHz
```
**检查点**：
- [x] fGHz是否为0.5（单个值） ✅ 通过

### 1.4 多频率测试 ✅
```
请进行植被场景的RSHub建模，分别分析1.0 GHz、1.41 GHz和6.9 GHz三个频率的亮温特性
```
**检查点**：
- [x] 是否生成了多个任务（每个频率一个任务） ✅ 通过
- [x] 每个任务的fGHz是否为单个值 ✅ 通过

---

## 2. 参数变化测试

### 2.1 不同植被高度 ✅
```
请进行植被场景的RSHub建模，植被高度分别设置为2米、5米、8米和12米，比较不同高度对亮温的影响
```
**检查点**：
- [x] veg_height参数是否正确设置 ✅ 通过
- [x] 是否生成了多个任务（每个高度一个任务） ✅ 通过

### 2.2 不同土壤湿度 ✅
```
请进行植被场景的RSHub建模，土壤湿度分别设置为0.05、0.15、0.25和0.35，分析土壤湿度对亮温的影响
```
**检查点**：
- [x] sm参数是否正确设置 ✅ 通过
- [x] 是否生成了多个任务 ✅ 通过

### 2.3 不同表面粗糙度 ✅
```
请进行植被场景的RSHub建模，表面粗糙度（rmsh）分别设置为0.005、0.01、0.02和0.05米
```
**检查点**：
- [x] rmsh参数是否正确设置 ✅ 通过

### 2.4 不同温度条件 ✅
```
请进行植被场景的RSHub建模，植被温度280K，地面温度285K，模拟冬季条件
```
**检查点**：
- [x] Tveg是否为280 ✅ 通过
- [x] Tgnd是否为285 ✅ 通过

### 2.5 高温条件 ✅
```
请进行植被场景的RSHub建模，植被温度320K，地面温度315K，模拟夏季高温条件
```
**检查点**：
- [x] Tveg是否为320 ✅ 通过
- [x] Tgnd是否为315 ✅ 通过

### 2.6 单一散射体类型 ✅
```
请进行植被场景的RSHub建模，只包含叶片散射体，参数为[0, 0.6, 0.0001, 0.05, 0, 90, 1, 6, 5000]
```
**检查点**：
- [x] scatters是否为嵌套列表格式 ✅ 通过
- [x] scatters是否只包含一个散射体 ✅ 通过
- [x] 散射体参数是否正确 ✅ 通过

### 2.7 复杂植被结构 ✅
```
请进行植被场景的RSHub建模，包含以下散射体：
- 主干：[1, 0.3, 8.0, 0.2, 0, 10, 0, 8, 0.1]
- 主枝：[1, 0.4, 2.0, 0.05, 20, 70, 2, 7, 2.0]
- 次枝：[1, 0.45, 0.8, 0.02, 30, 90, 3, 8, 15.0]
- 叶片：[0, 0.6, 0.0001, 0.04, 0, 90, 3, 8, 8000]
```
**检查点**：
- [x] scatters是否包含4个散射体 ✅ 通过
- [x] 每个散射体是否包含9个参数 ✅ 通过
- [x] 参数格式是否正确 ✅ 通过

### 2.8 指定土壤参数 ✅
```
请进行植被场景的RSHub建模，土壤湿度0.2，黏土含量0.25，表面粗糙度0.015米
```
**检查点**：
- [x] sm是否为0.2 ✅ 通过
- [x] clay是否为0.25 ✅ 通过
- [x] rmsh是否为0.015 ✅ 通过

---

## 3. 边界值和极值测试

### 3.1 极低频率
```
请进行植被场景的RSHub建模，频率0.1 GHz
```
**检查点**：
- [x] fGHz是否为0.1（单个值）✅ 通过：fGHz = 0.1（单个float值）
- [x] 是否出现警告或错误 ✅ 通过：任务提交成功，无错误

### 3.2 高频测试 ✅
```
请进行植被场景的RSHub建模，频率10 GHz
```
**检查点**：
- [x] fGHz是否为10（单个值）✅ 通过：fGHz = 10.0（单个float值）

### 3.3 极低土壤湿度 ✅
```
请进行植被场景的RSHub建模，土壤湿度0.01
```
**检查点**：
- [x] sm是否为0.01 ✅ 通过：sm = 0.01
- [x] 是否出现警告 ✅ 通过：任务提交成功，无警告

### 3.4 极高土壤湿度 ✅
```
请进行植被场景的RSHub建模，土壤湿度0.5
```
**检查点**：
- [x] sm是否为0.5 ✅ 通过：sm = 0.5
- [x] 是否出现警告或错误 ✅ 通过：任务提交成功，无警告或错误

### 3.5 极低温度 ✅
```
请进行植被场景的RSHub建模，植被温度250K，地面温度255K
```
**检查点**：
- [x] Tveg是否为250 ✅ 通过：Tveg = 250
- [x] Tgnd是否为255 ✅ 通过：Tgnd = 255

### 3.6 极高温度 ✅
```
请进行植被场景的RSHub建模，植被温度350K，地面温度345K
```
**检查点**：
- [x] Tveg是否为350 ✅ 通过：Tveg = 350
- [x] Tgnd是否为345 ✅ 通过：Tgnd = 345

### 3.7 极低植被高度 ✅
```
请进行植被场景的RSHub建模，植被高度0.5米
```
**检查点**：
- [x] veg_height是否为0.5 ✅ 通过：veg_height = 0.5

### 3.8 极高植被高度 ✅
```
请进行植被场景的RSHub建模，植被高度30米
```
**检查点**：
- [x] veg_height是否为30 ✅ 通过：veg_height = 30

---

## 4. 错误处理测试

### 4.1 fGHz格式错误（列表格式）✅
```
请进行植被场景的RSHub建模，频率[1.41, 6.9] GHz
```
**检查点**：
- [x] 是否出现错误 ✅ 通过：未出现错误，系统自动处理
- [x] 错误信息是否明确 ✅ 通过：系统自动将列表格式转换为多个任务
- [x] 是否自动修复（如果支持）✅ 通过：系统自动识别多个频率，生成2个独立任务（fGHz=1.41和fGHz=6.9），每个任务的fGHz都是单个值

### 4.2 包含inc_ang参数（不应该包含）✅
```
请进行植被场景的RSHub建模，频率1.41 GHz，入射角40度
```
**检查点**：
- [x] 是否自动删除inc_ang参数 ✅ 通过：系统自动删除了inc_ang参数，生成的data_dict中不包含inc_ang
- [x] 或是否出现错误提示 ✅ 通过：未出现错误提示，系统静默处理，任务提交成功

### 4.3 output_var错误（使用主动模式）✅
```
请进行植被场景的RSHub建模，主动模式，频率1.41 GHz
```
**检查点**：
- [x] 是否自动纠正为被动模式 ✅ 通过：系统自动将output_var设置为"tb"（被动模式），observation_modes也为"passive"
- [x] 或是否出现错误提示 ✅ 通过：未出现错误提示，系统静默纠正，任务提交成功

### 4.4 scatters格式错误 ✅
```
请进行植被场景的RSHub建模，散射体参数为单个列表而不是嵌套列表
```
**检查点**：
- [x] 是否出现格式错误 ✅ 通过：系统生成了正确的嵌套列表格式，scatters = [[...], [...], [...], [...]]，每个子列表包含9个参数
- [x] 错误信息是否明确 ✅ 通过：系统自动使用正确的嵌套列表格式，任务提交成功

### 4.5 scatters参数缺失 ✅
```
请进行植被场景的RSHub建模，频率1.41 GHz，不指定散射体
```
**检查点**：
- [x] 是否自动添加默认scatters ✅ 通过：系统自动添加了scatters参数，包含4个散射体（树枝、主枝、次枝、叶片）
- [x] 默认scatters格式是否正确 ✅ 通过：scatters格式为嵌套列表[[...], [...], [...], [...]]，每个子列表包含9个参数，格式完全正确

### 4.6 负值参数 ⚠️
```
请进行植被场景的RSHub建模，土壤湿度-0.1
```
**检查点**：
- [x] 是否出现错误提示 ⚠️ 部分通过：系统出现错误，但错误信息是"无法确定建模场景类型"，而不是关于负值参数的验证。可能需要改进场景识别逻辑或添加参数范围验证。

### 4.7 超出范围参数 ⬜
```
请进行植被场景的RSHub建模，土壤湿度1.5
```
**检查点**：
- [ ] 是否出现错误提示 ⬜ 未测试：因API调用限制（429错误）未能完成测试，需要重试

---

## 5. 实际应用场景测试

### 5.1 农田监测场景
```
请进行植被场景的RSHub建模，模拟农田玉米生长监测：
- 频率：1.41 GHz
- 植被高度：3米
- 土壤湿度：0.25
- 包含茎秆和叶片散射体
```
**检查点**：
- [ ] 参数是否正确设置
- [ ] scatters是否包含茎秆和叶片

### 5.2 森林监测场景
```
请进行植被场景的RSHub建模，模拟森林生态监测：
- 频率：6.9 GHz
- 植被高度：15米
- 包含树干、树枝、叶片多层结构
```
**检查点**：
- [ ] 是否包含多层散射体结构

### 5.3 SMAP卫星验证场景
```
请进行植被场景的RSHub建模，模拟SMAP卫星L波段观测：
- 频率：1.41 GHz
- 入射角：40度
- 农田植被覆盖
```
**检查点**：
- [ ] 是否自动忽略inc_ang参数
- [ ] 其他参数是否正确

### 5.4 不同生长阶段
```
请进行植被场景的RSHub建模，模拟作物不同生长阶段：
- 幼苗期：植被高度0.5米，叶片密度低
- 生长期：植被高度2米，叶片密度中等
- 成熟期：植被高度3.5米，叶片密度高
```
**检查点**：
- [ ] 是否生成了多个任务
- [ ] 每个任务的参数是否正确

---

## 6. 复杂场景测试

### 6.1 多散射体复杂结构
```
请进行植被场景的RSHub建模，包含以下复杂散射体结构：
- 5种不同类型的散射体
- 每种散射体有不同的垂直分布范围
- 模拟真实森林结构
```
**检查点**：
- [ ] scatters是否包含所有散射体
- [ ] 参数格式是否正确

### 6.2 频率响应对比
```
请进行植被场景的RSHub建模，分别使用L波段（1.41 GHz）和C波段（6.9 GHz），对比不同频率的植被穿透能力
```
**检查点**：
- [ ] 是否生成了两个任务
- [ ] 每个任务的fGHz是否为单个值

---

